<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles.css">
    <link rel="shortcut icon" href="data:image/png;base64,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" type="image/x-icon">
    <title>Dashboard</title>
</head>
<body class="content_dashboard">
    <header class="header_dash  header_index">
        <div class="container_img">
            <img class="img_dashboard" src="https://1000marcas.net/wp-content/uploads/2022/01/IMSS-Logo.png" alt="This is the logo">
        </div>
        <div class="container_list">
            <ul class="list_elements">
                <li id="token" data-token="<%= token %>">
                    username :
                    <%= name %>
                </li>
                <li>
                    email :
                    <%= email %>
                </li>
            </ul>
        </div>
    </header>
    <section class="find_empleado" id="find_empleado">
        <h1 class="title"> Bienvenido al  <%= title %></h1>
        <div class="contenedor_form">
            <form action="#">
                <div class="contend_input">
                    <input
                    id="matricula_employer"
                    type="text"
                    class="input_form"
                    >
                    <label for="">Busca al empleado por su matricula</label>
                </div>
                <div class="contend_input">
                    <input
                    id="name_employer"
                    type="text"
                    class="input_form"
                    >
                    <label for="">Busca al empleador por nombre</label>
                </div>
            </form>
        </div>
        <!-- Here with js I put all users -->
        <div id="employers">
        </div>
    </section>
    <section id="find_anothers">
        <div class="button button_find">
            <a href="/financiamiento_escrituras">Buscar por financiamiento de Escrituras</a>
        </div>
        <div class="button button_find">
            <a href="/gastosEscrituras">Buscar por Gastos de Escrituras</a>
        </div>
        <div class="button button_find">
            <a href="/pagaresVehiculos">Buscar por pagares de pagares de Vehiculos</a>
        </div>
        <div class="button button_find">
            <a href="/pagaresMediano">Buscar por pagares a Mediano PLazo</a>
        </div>
    </section>

    <footer class="footer_dashboard">
        <img src="https://pbs.twimg.com/media/FIMsqhbWYAMtCkZ?format=jpg&name=4096x4096" alt="footer del IMSS">
        <div class="address">
            <h2>Dirección</h2>
            <p>Calle 4 No.25, Piso, Corporativo
                la Américas Fracc. Industrial
                Alce Blanco, Naucalpan de
                Juárez, Edo. de Mex, C.P. 53370
            </p>
        </div>
        <div class="telefono">
            <h2>Teléfono</h2>
            <p>55-55-76-05-72 Ext. 289667</p>
        </div>
    </footer>
    <script>
        const matricula_employer = document.getElementById('matricula_employer')
        const name_employer = document.getElementById('name_employer')
        const employers = document.getElementById('employers')
        const token = document.getElementById('token')

        async function getValuesUser(value){
            const response = await fetch('/getValuesEmpleado',{
                method: 'POST',
                headers:{
                    'Content-Type': 'application/json',
                    authorization: 'Bearer ' + token.dataset.token
                },
                body: JSON.stringify(value)
            }).then(resp => {
                return resp;
            })
            .then(body => {
                return body.json();
            })
            .catch(err => {
                console.log(err)
                return null
            })
            return response
        }

        async function getAllUsers(find_users_by, element_insert){
            let employersWithThat = await getValuesUser(find_users_by)
            element_insert.innerHTML = '';
            for (let i = 0; i < employersWithThat.length; i++) {
                const divContentUsers = document.createElement('div')
                divContentUsers.innerHTML = `
                    <div class="content_list">
                        <p>${employersWithThat[i].MATRICULA}</p>
                        <p>${employersWithThat[i].Nombre}</p>
                        <div id="${employersWithThat[i].MATRICULA}" class="button button_informacion"> Ver informacion</div>
                    </div>
                `
                element_insert.appendChild(divContentUsers);
            }
        };

        matricula_employer.addEventListener('keyup', async (e) => {
            const find_employer_matricula = {
                sql: `MATRICULA`,
                value: e.target.value
            }
            await getAllUsers(find_employer_matricula, employers)
            if(employers.childNodes.length > 0){
                 const childs  = document.querySelectorAll('.button_informacion')
                   childs.forEach(child => {
                       child.addEventListener('click', () => {
                           window.location.href = `/employer/${child.getAttribute('id')}`
                       })
                   })
                }
        })
        name_employer.addEventListener('keyup', async (e) => {
            const find_employer_name =  {
                sql:`Nombre`,
                value: e.target.value
            }
            await getAllUsers(find_employer_name, employers)
            if(employers.childNodes.length > 0){
                const childs = document.querySelectorAll('.button_informacion')
                childs.forEach(child => {
                    child.addEventListener('click', () => {
                        window.location.href = `/employer/${child.getAttribute('id')}`
                    })
                })
            }
        })

    </script>
</body>
</html>